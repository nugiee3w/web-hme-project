// Data anggota untuk setiap divisi
const divisiData = {
    keagamaan: {
        title: "Divisi Keagamaan",
        description: "Divisi Keagamaan menjadi wadah bagi mahasiswa Jurusan Teknik Elektro untuk menyalurkan dan mengembangkan kegiatan keagamaan. Melalui berbagai program, divisi ini berkomitmen memperkuat nilai spiritual sekaligus memfasilitasi pengembangan pemahaman keagamaan di lingkungan mahasiswa.",
        koordinator: {
            name: "Irfansyah",
            position: "Koordinator Divisi Keagamaan",
            prodi: "Prodi Teknik Listrik '23",
            instagram: "https://instagram.com/_irfansyah_13",
            image: "assets/img/divisi/agama_1.png"
        },
        anggota: [
            {
                name: "Muhammad Arifin Hadi",
                position: "Wakil Koordinator Divisi Keagamaan",
                prodi: "Prodi Sistem Informasi Kota Cerdas '24",
                instagram: "https://instagram.com/mhmmaddarifin",
                image: "assets/img/divisi/agama_2.png"
            },
            {
                name: "Muhammad Dwi Kuncoro",
                position: "Anggota Divisi Keagamaan",
                prodi: "Prodi Teknik Listrik '23",
                instagram: "https://instagram.com/Dwi_la45",
                image: "assets/img/divisi/agama_3.png"
            },
            {
                name: "Muhammad Hafiz Ansyari",
                position: "Anggota Divisi Keagamaan",
                prodi: "Prodi Elektronika '23",
                instagram: "https://instagram.com/zmuhamxmadz",
                image: "assets/img/divisi/agama_4.png"
            },
            {
                name: "Fuad Nur Seto",
                position: "Anggota Divisi Keagamaan",
                prodi: "Prodi Teknik Informatika AXIOO '24",
                instagram: "https://instagram.com/fuaddnr",
                image: "assets/img/divisi/agama_5.png"
            },
            {
                name: "Jihan Nazma",
                position: "Anggota Divisi Keagamaan",
                prodi: "Prodi Teknologi Rekayasa Otomasi '24",
                instagram: "https://instagram.com/jihannazma__",
                image: "assets/img/divisi/agama_6.png"
            },
            {
                name: "Zahra Aulia Hadar",
                position: "Anggota Divisi Keagamaan",
                prodi: "Prodi Elektronika '23",
                instagram: "https://instagram.com/rraazraa_",
                image: "assets/img/divisi/agama_7.png"
            }
        ]
    },
    mikat: {
        title: "Divisi Minat dan Bakat",
        description: "Divisi Minat dan Bakat, yang biasa kita sebut Mikat, adalah wadah bagi mahasiswa untuk menyalurkan dan mengembangkan minat serta bakat di bidang olahraga dan seni. Melalui berbagai kegiatan dan program yang akan dilaksanakan, divisi ini bertujuan menumbuhkan jiwa kreativitas, solidaritas, dan sportivitas di kalangan mahasiswa Jurusan Teknik Elektro.",
        koordinator: {
            name: "Muhammad Pradita Alfarisy Nugraha",
            position: "Koordinator Divisi Minat dan Bakat",
            prodi: "Prodi Teknik Listrik '23",
            instagram: "https://instagram.com/praditaalfrsyy",
            image: "assets/img/divisi/mikat_1.png"
        },
        anggota: [
            {
                name: "Genezareto Kaije Putra Guntur",
                position: "Wakil Koordinator Divisi Minat dan Bakat",
                prodi: "Prodi Teknik Informatika AXIOO '24",
                instagram: "https://instagram.com/genezareto_",
                image: "assets/img/divisi/mikat_2.png"
            },
            {
                name: "Allya Rosaliyanti",
                position: "Anggota Divisi Minat dan Bakat",
                prodi: "Prodi Sistem Informasi Kota Cerdas '23",
                instagram: "https://instagram.com/cha.yara__",
                image: "assets/img/divisi/mikat_3.png"
            },
            {
                name: "Muhammad Arya Ramadhan",
                position: "Anggota Divisi Minat dan Bakat",
                prodi: "Prodi Sistem Informasi Kota Cerdas '23",
                instagram: "https://instagram.com/yaa.rmdhn",
                image: "assets/img/divisi/mikat_4.png"
            },
            {
                name: "Janang Samula Segah",
                position: "Anggota Divisi Minat dan Bakat",
                prodi: "Prodi Teknik Listrik '24",
                instagram: "https://instagram.com/Janangsgh_",
                image: "assets/img/divisi/mikat_5.png"
            },
            {
                name: "Muhammad Riduan",
                position: "Anggota Divisi Minat dan Bakat",
                prodi: "Prodi Teknologi Rekayasa Pembangkit Energi '24",
                instagram: "https://instagram.com/m.riduan434",
                image: "assets/img/divisi/mikat_6.png"
            },
            {
                name: "Ridho Naufal Hibatullah",
                position: "Anggota Divisi Minat dan Bakat",
                prodi: "Prodi Elektronika '24",
                instagram: "https://instagram.com/exxofall_",
                image: "assets/img/divisi/mikat_7.png"
            }
        ]
    },
    medinfo: {
        title: "Divisi Media dan Informasi",
        description: "Divisi Media dan Informasi, atau yang akrab disebut Medinfo, memiliki peran sentral dalam menyampaikan berbagai informasi seputar kegiatan HME Poliban dan info penting kemahasiswaan di lingkungan Jurusan Teknik Elektro. Lewat media sosial dan berbagai kanal komunikasi lainnya, Medinfo memastikan setiap kabar tersampaikan dengan jelas, tepat, dan kreatif. Transparansi, partisipasi, serta keterlibatan aktif mahasiswa jadi prioritas utama.",
        koordinator: {
            name: "Muhammad Anugrah Tsabitul Azmi",
            position: "Koordinator Divisi Media dan Informasi",
            prodi: "Prodi Teknik Informatika AXIOO '23",
            instagram: "https://instagram.com/nugi.ja",
            image: "assets/img/divisi/medinfo_1.png"
        },
        anggota: [
            {
                name: "Naindra Efriza Pasha",
                position: "Wakil Koordinator Divisi Media dan Informasi",
                prodi: "Prodi Teknik Informatika '24",
                instagram: "https://instagram.com/naindraefsha",
                image: "assets/img/divisi/medinfo_2.png"
            },
            {
                name: "Muhammad Maulana Malik Ibrahim",
                position: "Anggota Divisi Media dan Informasi",
                prodi: "Prodi Teknik Informatika '23",
                instagram: "https://instagram.com/_mhmmd.maulana",
                image: "assets/img/divisi/medinfo_3.png"
            },
            {
                name: "Raisatul Humairah",
                position: "Anggota Divisi Media dan Informasi",
                prodi: "Prodi Teknik Informatika '23",
                instagram: "https://instagram.com/raissaa.ca",
                image: "assets/img/divisi/medinfo_4.png"
            },
            {
                name: "Sri Mulyani Astuti",
                position: "Anggota Divisi Media dan Informasi",
                prodi: "Prodi Sistem Informasi Kota Cerdas '23",
                instagram: "https://instagram.com/srlyanna",
                image: "assets/img/divisi/medinfo_5.png"
            },
            {
                name: "Salsabila Aika Zahra Khansa Afiffa",
                position: "Anggota Divisi Media dan Informasi",
                prodi: "Prodi Sistem Informasi Kota Cerdas '24",
                instagram: "https://instagram.com/salsabilaaikaa",
                image: "assets/img/divisi/medinfo_6.png"
            },
            {
                name: "Mikhel Yosep",
                position: "Anggota Divisi Media dan Informasi",
                prodi: "Prodi Elektronika '24",
                instagram: "https://instagram.com/Michitsz",
                image: "assets/img/divisi/medinfo_7.png"
            },
            {
                name: "Muhamad Dudi Aulia",
                position: "Anggota Divisi Media dan Informasi",
                prodi: "Prodi Teknik Listrik '24",
                instagram: "https://instagram.com/dodiuv",
                image: "assets/img/divisi/medinfo_8.png"
            }
        ]
    },
    bidik: {
        title: "Divisi Bimbingan Pendidikan",
        description: "Divisi Bimbingan Pendidikan, atau yang biasa disebut Bidik, adalah wadah yang mendukung mahasiswa Jurusan Teknik Elektro dalam meningkatkan potensi dan prestasi di bidang akademik. Dengan berbagai program kerja yang telah disusun, divisi ini berkomitmen memberikan layanan terbaik untuk menunjang kesuksesan pendidikan dan pengembangan diri mahasiswa, serta menjadi mitra dalam perjalanan akademik mereka.",
        koordinator: {
            name: "Noor Alfa Rahmah",
            position: "Koordinator Divisi Bimbingan Pendidikan",
            prodi: "Prodi Teknik Informatika AXIOO '23",
            instagram: "https://instagram.com/alfarahmahh_",
            image: "assets/img/divisi/bidik_1.png"
        },
        anggota: [
            {
                name: "Muhammad Shiddiq Kurniawan",
                position: "Wakil Koordinator Divisi Bimbingan Pendidikan",
                prodi: "Prodi Teknik Listrik '24",
                instagram: "https://instagram.com/sidikman__3142",
                image: "assets/img/divisi/bidik_2.png"
            },
            {
                name: "Muhammad Gulam",
                position: "Anggota Divisi Bimbingan Pendidikan",
                prodi: "Prodi Elektronika '23",
                instagram: "https://instagram.com/Mhmmddgulam",
                image: "assets/img/divisi/bidik_3.png"
            },
            {
                name: "Rizky Wulandari",
                position: "Anggota Divisi Bimbingan Pendidikan",
                prodi: "Prodi Teknik Informatika '23",
                instagram: "https://instagram.com/wlxdrzky",
                image: "assets/img/divisi/bidik_4.png"
            },
            {
                name: "Jihan Eka Putri Husnul Khotimah",
                position: "Anggota Divisi Bimbingan Pendidikan",
                prodi: "Prodi Sistem Informasi Kota Cerdas '24",
                instagram: "https://instagram.com/jihan.hk_",
                image: "assets/img/divisi/bidik_5.png"
            },
            {
                name: "Muhammad Febrian Al Bukhari",
                position: "Anggota Divisi Bimbingan Pendidikan",
                prodi: "Prodi Sistem Informasi Kota Cerdas '24",
                instagram: "https://instagram.com/fbran.zxee_",
                image: "assets/img/divisi/bidik_6.png"
            },
            {
                name: "Reza Rafsanjani",
                position: "Anggota Divisi Bimbingan Pendidikan",
                prodi: "Prodi Sistem Informasi Kota Cerdas '24",
                instagram: "https://instagram.com/_____rexataa",
                image: "assets/img/divisi/bidik_7.png"
            }
        ]
    },
    humas: {
        title: "Divisi Hubungan Masyarakat",
        description: "Divisi Hubungan Masyarakat bertugas membangun dan memelihara hubungan baik dengan berbagai pihak eksternal. Divisi ini mengelola kerjasama dengan instansi, organisasi lain, alumni, dan masyarakat umum. Tim ini berkomitmen untuk memperluas jaringan organisasi, mencari peluang kolaborasi, dan memperkuat posisi HME di lingkungan eksternal kampus.",
        koordinator: {
            name: "Muhammad Riza",
            position: "Koordinator Divisi Hubungan Masyarakat",
            prodi: "Prodi Teknik Informatika '23",
            instagram: "https://instagram.com/_muhammadriza_",
            image: "assets/img/divisi/humas_1.png"
        },
        anggota: [
            {
                name: "Muhammad Ilham Saputra",
                position: "Wakil Koordinator Divisi Hubungan Masyarakat",
                prodi: "Prodi Sistem Informasi Kota Cerdas '24",
                instagram: "https://instagram.com/muhammadilhamsaputra",
                image: "assets/img/divisi/humas_2.png"
            },
            {
                name: "Muhammad Yusni",
                position: "Anggota Divisi Hubungan Masyarakat",
                prodi: "Prodi Teknik Informatika '23",
                instagram: "https://instagram.com/muhammadyusni",
                image: "assets/img/divisi/humas_3.png"
            },
            {
                name: "Syamsuddin Noor Habibi",
                position: "Anggota Divisi Hubungan Masyarakat",
                prodi: "Prodi Teknik Informatika '23",
                instagram: "https://instagram.com/syamsuddinnoorhabibi",
                image: "assets/img/divisi/humas_4.png"
            },
            {
                name: "Yohana Elta Cing Meyni",
                position: "Anggota Divisi Hubungan Masyarakat",
                prodi: "Prodi Teknik Informatika '23",
                instagram: "https://instagram.com/yohanaeltacingmeyni",
                image: "assets/img/divisi/humas_5.png"
            },
            {
                name: "Febia Nurwulan",
                position: "Anggota Divisi Hubungan Masyarakat",
                prodi: "Prodi Teknik Informatika AXIOO '24",
                instagram: "https://instagram.com/febianurwulan",
                image: "assets/img/divisi/humas_6.png"
            },
            {
                name: "Na'ima Salsabila Yunus",
                position: "Anggota Divisi Hubungan Masyarakat",
                prodi: "Prodi Sistem Informasi Kota Cerdas '24",
                instagram: "https://instagram.com/naimasalsabilayunus",
                image: "assets/img/divisi/humas_7.png"
            }
        ]
    }
};

// Variable untuk carousel divisi
let currentMemberIndex = 0;
let currentDivisiMembers = [];

function openDivisiModal(divisiKey) {
    const divisi = divisiData[divisiKey];
    if (!divisi) return;

    // Set modal title
    document.getElementById('divisiModalLabel').textContent = divisi.title;

    // Set description
    document.getElementById('divisiDescTitle').textContent = 'Tentang ' + divisi.title;
    document.getElementById('divisiDescContent').textContent = divisi.description;

    // Prepare members array (koordinator + anggota)
    currentDivisiMembers = [divisi.koordinator].concat(divisi.anggota);
    
    // Set statistics
    document.getElementById('totalMembers').textContent = currentDivisiMembers.length;
    document.getElementById('divisiYear').textContent = '2024';

    // Initialize carousel
    initMemberCarousel();

    // Show modal
    const modal = new bootstrap.Modal(document.getElementById('divisiModal'));
    modal.show();
}

function initMemberCarousel() {
    const track = document.getElementById('memberCarouselTrack');
    const dots = document.getElementById('carouselDots');
    
    // Clear previous content
    track.innerHTML = '';
    dots.innerHTML = '';
    
    // Generate member cards
    currentDivisiMembers.forEach(function(member, index) {
        // Create member card
        const memberCard = document.createElement('div');
        memberCard.className = 'carousel-member-card';
        memberCard.style.cssText = 'min-width: 100%; height: 100%; padding: 20px; display: flex; align-items: center; justify-content: center;';
        
        memberCard.innerHTML = generateCarouselMemberCard(member);
        track.appendChild(memberCard);
        
        // Create minimalist line indicator
        const dot = document.createElement('button');
        dot.className = 'carousel-dot' + (index === 0 ? ' active' : '');
        dot.style.cssText = 'width: 12px; height: 2px; border-radius: 1px; border: none; margin: 0 2px; background: ' + (index === 0 ? '#37517e' : '#ddd') + '; cursor: pointer; transition: all 0.2s ease; opacity: 0.6;';
        dot.onclick = function() { goToMember(index); };
        dots.appendChild(dot);
    });

    // Reset to first member
    currentMemberIndex = 0;
    updateCarouselPosition();

    // Setup navigation buttons
    setupCarouselControls();
}

function generateCarouselMemberCard(member) {
    return '<div style="position: relative; box-shadow: 0px 4px 20px rgba(0, 0, 0, 0.15); padding: 30px; border-radius: 15px; background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%); transition: all 0.3s ease; max-width: 500px; width: 100%; text-align: center; border: 2px solid #e9ecef;">' +
        '<div style="overflow: hidden; width: 150px; height: 150px; border-radius: 50%; margin: 0 auto 20px; border: 4px solid #37517e;">' +
        '<img src="' + member.image + '" class="img-fluid" alt="' + member.name + '" style="width: 100%; height: 100%; object-fit: cover;">' +
        '</div>' +
        '<h4 style="font-weight: 700; margin-bottom: 10px; font-size: 22px; color: #37517e;">' + member.name + '</h4>' +
        '<span style="display: block; font-size: 16px; padding-bottom: 10px; font-weight: 500; color: #666;">' + member.position + '</span>' +
        '<p style="margin: 10px 0 15px 0; font-size: 15px; color: #888;">' + member.prodi + '</p>' +
        '<div style="margin-top: 20px;">' +
        '<a href="' + member.instagram + '" target="_blank" onclick="event.stopPropagation();" class="modal-social-link">' +
        '<i class="ri-instagram-fill"></i>' +
        '</a>' +
        '</div>' +
        '</div>';
}

function setupCarouselControls() {
    // Previous button
    document.getElementById('prevMember').onclick = function() {
        currentMemberIndex = currentMemberIndex > 0 ? currentMemberIndex - 1 : currentDivisiMembers.length - 1;
        updateCarouselPosition();
    };

    // Next button
    document.getElementById('nextMember').onclick = function() {
        currentMemberIndex = currentMemberIndex < currentDivisiMembers.length - 1 ? currentMemberIndex + 1 : 0;
        updateCarouselPosition();
    };
}

function goToMember(index) {
    currentMemberIndex = index;
    updateCarouselPosition();
}

function updateCarouselPosition() {
    const track = document.getElementById('memberCarouselTrack');
    const dots = document.querySelectorAll('#carouselDots .carousel-dot');
    
    // Update track position
    track.style.transform = 'translateX(-' + (currentMemberIndex * 100) + '%)';
    
    // Update dots
    dots.forEach(function(dot, index) {
        if (index === currentMemberIndex) {
            dot.style.background = '#37517e';
            dot.style.opacity = '1';
            dot.classList.add('active');
        } else {
            dot.style.background = '#ddd';
            dot.style.opacity = '0.6';
            dot.classList.remove('active');
        }
    });
}
